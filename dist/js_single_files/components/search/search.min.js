((bbn)=>{let script=document.createElement('script');script.innerHTML=`<div :class="[
       componentClass,
       'bbn-iblock',
       'bbn-textbox',
       {'bbn-disabled': !!isDisabled}
     ]"
     @mouseenter="isOverDropdown = true"
     @mouseleave="isOverDropdown = false"
     @focusin="isActive = true"
     @focusout="onFocusOut">
  <div :class="['bbn-rel', 'bbn-search-container', 'bbn-flex-width', 'bbn-vmiddle', currentItemCls, {
    'bbn-search-container-native': native
  }]">
    <div v-if="sourceIcon && hasValue && !!currentItemIcon"
         class="bbn-left-xspadded">
      <i :class="currentItemIcon"
         @click.stop="click" />
    </div>
    <div v-if="sourceImg && hasValue && !!currentItemImg"
         class="bbn-left-xspadded">
      <img src="currentItemImg"
           @click.stop="click">
    </div>
    <bbn-input :tabindex="0"
               class="bbn-no-border bbn-i"
               v-model="filterString"
               ref="input"
               @focus="selectText"
               @blur="inputIsVisible = false"
               autocomplete="off"
               @keydown.stop="keydown"
               @change="onChange"
               :autosize="autosize"
               autocorrect="off"
               autocapitalize="off"
               spellcheck="false"
               :button-right="currentIcon"
               :button-right-disabled="!filteredData.length"
               :action-right="() => {isOpened = !isOpened}"
               :nullable="true"
               :placeholder="placeholder"/>
  </div>
  <component :is="!!portalSelector && !isInsideFloater ? 'bbn-portal' : 'div'"
             :selector="portalSelector">
    <bbn-floater v-if="!popup
                    && filteredData.length
                    && !isDisabled
                    && !native
                    && ready
                    && isOpened"
                :element="asMobile ? undefined : $el"
                :max-height="asMobile ? undefined : maxHeight"
                :min-width="$el.clientWidth"
                :width="asMobile ? '100%' : undefined"
                :height="asMobile ? '100%' : undefined"
                ref="list"
                :children="null"
                :source-value="sourceValue"
                :source-text="sourceText"
                :source-url="sourceUrl"
                :source-icon="sourceIcon"
                :title="floaterTitle"
                :buttons="asMobile ? realButtons : []"
                :item-component="realComponent"
                @mouseenter="isOverDropdown = true"
                @mouseleave="isOverDropdown = false"
                @ready="attachList"
                @select="select"
                @close="isOpened = false"
                :source="filteredData"/>
  </component>
</div>
`;script.setAttribute('id','bbn-tpl-component-search');script.setAttribute('type','text/x-template');document.body.insertAdjacentElement('beforeend',script);(function(bbn){"use strict";Vue.component('bbn-search',{mixins:[bbn.vue.basicComponent,bbn.vue.eventsComponent,bbn.vue.resizerComponent,bbn.vue.listComponent,bbn.vue.keynavComponent,bbn.vue.urlComponent,bbn.vue.dropdownComponent],props:{filterable:{type:Boolean,default:true},minLength:{type:Number,default:2},delay:{type:Number,default:250},filterMode:{type:String,default:'contains'},autobind:{type:Boolean,default:false},disabled:{type:[Boolean,Function],default:false},autosize:{type:Boolean,default:false},placeholder:{type:String}},data(){return{inputIsVisible:false,isDisabled:this.disabled}},methods:{_setInputVisible(){this.filterString=this.currentText;this.inputIsVisible=true;this.$nextTick(()=>{this.getRef('input').focus();})},onChange(){if(!this.ready){this.ready=true;}},click(){if(!this.isDisabled){this.getRef('input').focus();if(this.filteredData.length){this.isOpened=!this.isOpened;}}},leave(){if(this.isOpened&&!this.getRef('list').isOver){this.isOpened=false;}
this.inputIsVisible=false;this.filterString='';},select(item){if(item){if(this.sourceUrl&&item[this.sourceUrl]){bbn.fn.link(item[this.sourceUrl]);}
else if(this.sourceAction&&item[this.sourceAction]&&bbn.fn.isFunction(item[this.sourceAction])){item[this.sourceAction](item);}
else{this.$emit('select',item);}
this.filterString='';}
this.isOpened=false;},resetDropdown(){this.currentText=this.currentTextValue;this.filterString=this.currentTextValue;this.unfilter();if(this.isOpened){this.isOpened=false;}},keydown(e){if(this.commonKeydown(e)){return;}
else if(this.isOpened&&(e.key==='Escape')){e.stopPropagation();e.preventDefault();this.resetDropdown();return;}
else if(bbn.var.keys.upDown.includes(e.keyCode)){this.keynav(e);}},},watch:{disabled(v){this.isDisabled=v;},filterString(v){if(!this.ready){this.ready=true;}
clearTimeout(this.filterTimeout);bbn.fn.log("CLEARED")
if(!v&&this.nullable&&this.inputIsVisible){bbn.fn.log("NO VALUE")
this.unfilter();this.emitInput(null);this.currentText='';if(this.currentData.length){this.currentData.splice(0,this.currentData.length);}}
else if(v){bbn.fn.log("VALUE")
if(v.length<this.minLength){if(this.currentData.length){this.currentData.splice(0,this.currentData.length);}}
else if((v!==this.currentText)){bbn.fn.log("MIN PASSED")
this.isOpened=false;this.filterTimeout=setTimeout(()=>{if(this.isActive){bbn.fn.log("UPDATING AUTOC");this.currentFilters.conditions.splice(0,this.currentFilters.conditions.length?1:0,{field:this.sourceText,operator:this.filterMode,value:v});this.updateData().then(()=>{this.isOpened=true;})}},this.delay);}}
else if(!v){this.unfilter();}}}});})(bbn);})(bbn);