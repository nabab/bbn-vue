((bbn)=>{(function(bbn){"use strict";let config={selector:"bbn-portal-target-"+bbn.fn.randomString(20,30)};let TargetContainer=Vue.extend({abstract:true,name:'PortalOutlet',props:['nodes','tag'],data:vm=>({updatedNodes:vm.nodes,}),render(h){const nodes=this.updatedNodes&&this.updatedNodes();if(!nodes){return h();}
return nodes.length===1&&!nodes[0].text?nodes:h(this.tag||'DIV',nodes);},destroyed(){const{$el:el}=this;el&&el.parentNode&&el.parentNode.removeChild(el);},});Vue.component('bbn-portal',{mixins:[bbn.vue.basicComponent],props:{disabled:{type:Boolean,},prepend:{type:Boolean,},selector:{type:[HTMLElement,String]},tag:{type:String,default:'DIV',},},data(){return{randomId:bbn.fn.randomString(20,30)}},render(h){if(this.disabled){const nodes=this.$scopedSlots&&bbn.fn.isFunction(this.$scopedSlots.default)&&this.$scopedSlots.default()
if(!nodes){return h();}
return nodes.length<2&&!nodes[0].text?nodes:h(this.tag,nodes);}
return h();},created(){if(!this.disabled&&!this.getTargetEl()){this.insertTargetEl()}},updated(){this.$nextTick(()=>{if(!this.disabled&&this.slotFn!==this.$scopedSlots.default){this.container.updatedNodes=this.$scopedSlots.default;}
this.slotFn=this.$scopedSlots.default;})},beforeDestroy(){this.unmount()},watch:{disabled:{immediate:true,handler(disabled){disabled?this.unmount():this.$nextTick(this.mount)},},element:{immediate:true,handler(){if(!this.disabled){this.$nextTick(this.mount)}},},},methods:{getTargetEl(){return bbn.fn.isString(this.selector)?document.querySelector(this.selector):this.selector;},insertTargetEl(){if(!this.disabled){const parent=document.querySelector('body');const child=document.createElement(this.tag);child.id=this.randomId;parent.appendChild(child);}},mount(){const targetEl=this.getTargetEl();const el=document.createElement('DIV');if(targetEl){if(this.prepend&&targetEl.firstChild){targetEl.insertBefore(el,targetEl.firstChild);}
else{targetEl.appendChild(el);}}
this.container=new TargetContainer({el,parent:this,propsData:{tag:this.tag,nodes:this.$scopedSlots.default,},});},unmount(){if(this.container){this.container.$destroy();delete this.container;}},},});})(bbn);})(bbn);