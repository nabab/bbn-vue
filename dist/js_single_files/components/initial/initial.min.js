((bbn)=>{let script=document.createElement('script');script.innerHTML=`<span :class="['bbn-iblock', 'bbn-unselectable', componentClass]"
      :title="currentName"
      :style="{
        'background-color': currentColor,
        width: currentWidth,
        height: currentHeight,
        'border-radius': currentRadius,
        '-moz-border-radius': currentRadius
      }">
  <div class="bbn-100 bbn-middle">
    <div class="bbn-block"
         :style="fontStyle"
         v-text="currentLetters"/>
  </div>
</span>`;script.setAttribute('id','bbn-tpl-component-initial');script.setAttribute('type','text/x-template');document.body.insertAdjacentElement('beforeend',script);(function(bbn){"use strict";Vue.component('bbn-initial',{mixins:[bbn.vue.basicComponent],props:{userId:{type:[String,Number]},userName:{type:String,},width:{type:[String,Number]},height:{type:[String,Number]},defaultSize:{type:Number,default:36},charCount:{type:Number,default:2},textColor:{type:[String],default:'#FFF'},fontFamily:{type:String},color:{type:String},fontSize:{type:[Number,String]},fontWeight:{type:[Number,String],default:400},letters:{type:String},radius:{type:[Number,String],default:3},source:{type:Array,default(){return window.appui&&appui.app&&appui.app.users?appui.app.users:[]}},nameField:{type:String,default(){return window.appui&&appui.app&&appui.app.users?'text':'name'}},idField:{type:String,default(){return window.appui&&appui.app&&appui.app.users?'value':'id'}},colors:{type:Array,default(){return['#1abc9c','#16a085','#f1c40f','#f39c12','#2ecc71','#27ae60','#e67e22','#d35400','#3498db','#2980b9','#e74c3c','#c0392b','#9b59b6','#8e44ad','#bdc3c7','#34495e','#2c3e50','#95a5a6','#7f8c8d','#ec87bf','#d870ad','#f69785','#9ba37e','#b49255','#b49255','#a94136']}}},computed:{fontStyle(){let o={color:this.textColor,'font-weight':this.fontWeight,'font-size':this.currentFontSize};if(this.fontFamily){o['font-family']=this.fontFamily;}
return o;},currentName(){let name=this.userName;if(!name&&this.userId&&this.source){name=bbn.fn.getField(this.source,this.nameField,this.idField,this.userId);}
return name;},currentLetters(){let currentLetters='';if(this.letters){currentLetters=this.letters;}
if(!this.letters&&this.currentName){let tmp=bbn.fn.removeEmpty(this.currentName.split(' '));while((tmp.length>this.charCount)&&(tmp[0].length<=3)){tmp.shift();}
for(let i=0;i<tmp.length;i++){if(!this.charCount||(currentLetters.length<=this.charCount)){currentLetters+=bbn.fn.substr(tmp[i],0,1);}}}
return this.charCount&&!this.letters?bbn.fn.substr(currentLetters,0,this.charCount):currentLetters;},currentColor(){let name=this.userName,col=this.color;if(!col){let sum=0;this.currentLetters.split('').forEach(a=>{sum+=a.charCodeAt();});sum+=name?bbn.fn.substr(this.userName,-1).charCodeAt():bbn.fn.substr(this.currentLetters,0,1).charCodeAt();let colorIndex=Math.floor(sum%this.colors.length);col=this.colors[colorIndex]}
return col?col:'#000'},currentFontSize(){let currentFontSize=this.fontSize;if(!this.fontSize){let baseSize=parseInt(this.height)/ this.charCount;currentFontSize=Math.round(baseSize+bbn.fn.percent(15*this.charCount,baseSize));}
return bbn.fn.isNumber(currentFontSize)?currentFontSize+'px':currentFontSize;},currentWidth(){let w=this.width||this.height||this.defaultSize;return bbn.fn.isNumber(w)?w+'px':w;},currentHeight(){let h=this.height||this.width||this.defaultSize;return bbn.fn.isNumber(h)?h+'px':h;},currentRadius(){return bbn.fn.isNumber(this.radius)?this.radius+'px':this.radius;}}});})(bbn);})(bbn);