(bbn_resolve)=>{((bbn)=>{let script=document.createElement('script');script.innerHTML=`<div :class="[componentClass, 'bbn-modal']"
     :style="containerCSS"
     tabindex="-1"
     @animationstart="onResize"
     @keydown.esc.prevent.stop="close">
  <bbn-floater v-if="ready"
              :title="title"
              :maximizable="maximizable"
              :closable="closable"
              :animation="true"
              :width="width || null"
              :height="height || null"
              :component="component"
              :buttons="buttons"
              :footer="footer"
              :content="content"
              :source="source"
              :container="$el"
              @beforeClose="floaterClose"
              :latency="500"
              @keydown.esc.prevent.stop="close">
    <slot></slot>
  </bbn-floater>
</div>`;script.setAttribute('id','bbn-tpl-component-window');script.setAttribute('type','text/x-template');document.body.insertAdjacentElement('beforeend',script);let css=document.createElement('link');css.setAttribute('rel',"stylesheet");css.setAttribute('href',bbn.vue.libURL+"dist/js/components/window/window.css");document.head.insertAdjacentElement('beforeend',css);(function(bbn){"use strict";Vue.component('bbn-window',{name:'bbn-window',mixins:[bbn.vue.basicComponent,bbn.vue.resizerComponent],props:{width:{type:[String,Number,Boolean]},height:{type:[String,Number,Boolean]},minWidth:{type:[String,Number]},minHeight:{type:[String,Number]},maximizable:{type:Boolean,default:true},closable:{type:Boolean,default:true},scrollable:{type:Boolean,default:true},draggable:{type:Boolean,default:false},resizable:{type:Boolean,default:true},maximized:{type:Boolean,default:false},onOpen:{type:Function},beforeClose:{type:Function},onClose:{type:Function},afterClose:{type:Function},footer:{type:[Function,String,Object]},buttons:{type:Array,default(){return[];}},source:{type:Object,default(){return{};}},component:{type:[String,Function,Object]},title:{type:[String,Boolean],default:bbn._("Untitled")},index:{type:Number},uid:{type:String},content:{type:String},mode:{type:String}},data(){let fns=[];if(this.onClose){fns.push(this.onClose);}
return{isMaximized:this.maximized,widthUnit:(typeof this.width==='string')&&(this.width.substr(-1)==='%')?'%':'px',currentWidth:this.width,heightUnit:(typeof this.height==='string')&&(this.height.substr(-1)==='%')?'%':'px',currentHeight:this.height,closingFunctions:fns,showContent:false,popup:false,maxHeight:null,maxWidth:null,containerCSS:{opacity:0}}},computed:{realWidth(){if(!this.currentWidth){return'auto';}
if(typeof this.currentWidth==='number'){return this.currentWidth.toString()+'px'}
return this.currentWidth;},realHeight(){if(!this.currentHeight){return'auto';}
if(typeof this.currentHeight==='number'){return this.currentHeight.toString()+'px'}
return this.currentHeight;},},methods:{getContainerPosition(){return this.$el?this.$el.parentNode.getBoundingClientRect():{};},onResize(){let o=this.getContainerPosition();this.containerCSS={opacity:1,top:o.top+'px',left:o.left+'px',width:o.width+'px',height:o.height+'px',}},addClose(fn){for(let i=0;i<arguments.length;i++){if(typeof arguments[i]==='function'){this.closingFunctions.push(arguments[i])}}},removeClose(fn){if(!fn){this.closingFunctions=[];}
else{this.closingFunctions=bbn.fn.filter(this.closingFunctions,f=>{return fn!==f;})}},floaterClose(e,floater){this.close(false,e);},close(force,ev){let ok=true;if(!ev){ev=new Event('beforeClose',{cancelable:true});}
if(!force){if(this.popup){this.popup.$emit('beforeClose',ev,this);}
else{this.$emit('beforeClose',ev,this);}
if(this.beforeClose&&(this.beforeClose(this)===false)){return;}}
if(!force&&bbn.fn.isObject(ev)&&ev.defaultPrevented){return;}
let closeEvent=new Event('close',{cancelable:true});this.$el.style.display='block';this.$nextTick(()=>{this.$emit("close",this,closeEvent);if(this.afterClose){this.afterClose(this);}})}},created(){this.popup=this.closest('bbn-popup');},mounted(){this.ready=true;this.onResize();},watch:{isMaximized(){this.$nextTick(()=>{this.selfEmit(true);})},}});})(bbn);if(bbn_resolve){bbn_resolve("ok");}})(bbn);}