(bbn_resolve)=>{((bbn)=>{let script=document.createElement('script');script.innerHTML=`<div :class="componentClass">
  <bbn-button icon="nf nf-fa-chevron_up"
              class="bbn-no-radius bbn-no-border"
              :disabled="upButtonDisabled"
              @click="goUp"/>
  <div class="bbn-wheel-container bbn-rel bbn-bordered-top bbn-bordered-bottom"
       ref="container">
    <div class="bbn-overlay">
      <div class="bbn-middle bbn-wheel-item">
        <span>&nbsp;</span>
      </div>
      <div class="bbn-middle bbn-wheel-item">
        <span>&nbsp;</span>
      </div>
      <div v-if="filteredData.length"
           :class="['bbn-middle', 'bbn-wheel-item', {'bbn-primary': !isNull(value)}]"
           ref="bar">
        <span>&nbsp;</span>
      </div>
      <div v-else
           class="bbn-middle bbn-wheel-item">
        <span v-text="noData"/>
      </div>
      <div class="bbn-middle bbn-wheel-item">
        <span>&nbsp;</span>
      </div>
      <div class="bbn-middle bbn-wheel-item">
        <span>&nbsp;</span>
      </div>
    </div>
    <bbn-scroll :full-page="true"
                ref="scroll"
                axis="y"
                @ready="scrollReady = true"
                @scroll="onScroll"
                @afterscroll="onAfterScroll"
                :step-y="barElement"
                :after-scroll-delay="100"
                :hidden="true">
      <div class="bbn-middle bbn-wheel-item"
            ref="top0">
        <span>&nbsp;</span>
      </div>
      <div class="bbn-middle bbn-wheel-item"
            ref="top1">
        <span>&nbsp;</span>
      </div>
      <div v-for="(o, i) in filteredData"
          :class="['bbn-middle', 'bbn-wheel-item', {
            'bbn-p': o.data[sourceValue] !== value,
            'bbn-primary-text': !isScrolling && (o.data[sourceValue] === value)
          }]"
          @click="setValue(o.data[sourceValue])"
          :ref="'v-' + o.index">
        <span v-if="o.data[sourceText]"
              v-text="o.data[sourceText]"
              :index="o.index"/>
        <span v-else>&nbsp;</span>
      </div>
      <div class="bbn-middle bbn-wheel-item"
            ref="bottom0">
        <span>&nbsp;</span>
      </div>
      <div class="bbn-middle bbn-wheel-item"
            ref="bottom1">
        <span>&nbsp;</span>
      </div>
    </bbn-scroll>
  </div>
  <bbn-button icon="nf nf-fa-chevron_down"
              class="bbn-no-radius bbn-no-border"
              :disabled="downButtonDisabled"
              @click="goDown"/>
  <input type="hidden"
         v-model="value"
         ref="element"
         :name="name">
</div>`;script.setAttribute('id','bbn-tpl-component-wheel');script.setAttribute('type','text/x-template');document.body.insertAdjacentElement('beforeend',script);let css=document.createElement('link');css.setAttribute('rel','stylesheet');css.setAttribute('href',bbn.vue.libURL+'dist/js/components/wheel/wheel.css');document.head.insertAdjacentElement('beforeend',css);(function(bbn){"use strict";Vue.component('bbn-wheel',{mixins:[bbn.vue.basicComponent,bbn.vue.inputComponent,bbn.vue.listComponent],data(){return{scrollReady:false,barElement:undefined,isScrolling:false}},computed:{isReady(){return this.scrollReady&&this.isLoaded;},upButtonDisabled(){if(this.isNull(this.value)){return false;}
let index=this.getIndexByValue(this.value),idx=bbn.fn.search(this.filteredData,'index',index);if(idx>-1){return!this.filteredData[idx-1];}},downButtonDisabled(){if(this.isNull(this.value)){return false;}
let index=this.getIndexByValue(this.value),idx=bbn.fn.search(this.filteredData,'index',index);if(idx>-1){return!this.filteredData[idx+1];}}},methods:{isNull:bbn.fn.isNull,setValue(val){if(!this.isNull(val)&&(val!==this.value)){let pos=this.getScrollPosByVal(val);if(pos!==false){this.scrollTo(pos).then(()=>{this.emitInput(val);});}}
this.isScrolling=false;},scrollTo(pos){return new Promise(resolve=>{let scroll=this.getRef('scroll');scroll.scrollTo(0,pos).then(()=>{setTimeout(()=>{this.isScrolling=false;resolve();},scroll.latency+1);});});},getScrollPosByVal(val){let r=this.getRefByValue(val),index=this.getIndexByValue(val),idx=bbn.fn.search(this.filteredData,'index',index);if(r&&(idx>-1)){return r.clientHeight*idx;}
return false;},getIndexByValue(val){let index=bbn.fn.getField(this.filteredData,'index',{['data.'+this.sourceValue]:val});if(index!==undefined){return index;}
return false;},getRefByValue(val){let index=this.getIndexByValue(val);if(index!==false){return this.getRef('v-'+index);}
return false;},onReady(){setTimeout(()=>{if(!this.isNull(this.value)){let pos=this.getScrollPosByVal(this.value);if(pos!==false){this.scrollTo(pos).then(()=>{this.ready=true;});}
else{this.ready=true;}}
else{this.ready=true;}},300);},onScroll(){if(this.ready){let barElement=this.getRef('bar')
this.barElement=barElement||undefined;this.isScrolling=true;}},onAfterScroll(){let contRect=this.getRef('container').getBoundingClientRect();let ele=document.elementFromPoint(contRect.x+(contRect.width / 2),contRect.y+(contRect.height / 2));if(ele&&ele.hasAttribute('index')){let index=parseInt(ele.getAttribute('index')),item=this.currentData[index];if(item&&!this.isNull(item.data[this.sourceValue])){this.setValue(item.data[this.sourceValue]);}}
this.isScrolling=false;},goUp(){if(!this.isNull(this.value)){let index=this.getIndexByValue(this.value),idx=bbn.fn.search(this.filteredData,'index',index);if((idx>-1)&&!!this.filteredData[idx-1]){this.setValue(this.filteredData[idx-1].data[this.sourceValue]);}}},goDown(){if(!this.isNull(this.value)){let index=this.getIndexByValue(this.value),idx=bbn.fn.search(this.filteredData,'index',index);if((idx>-1)&&!!this.filteredData[idx+1]){this.setValue(this.filteredData[idx+1].data[this.sourceValue]);}}}},watch:{isReady(val){if(val){this.onReady();}}}});})(bbn);if(bbn_resolve){bbn_resolve("ok");}})(bbn);}