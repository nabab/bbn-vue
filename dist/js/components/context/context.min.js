(bbn_resolve)=>{((bbn)=>{let script=document.createElement('script');script.innerHTML=`<component :is="tag"
           :class="componentClass"
           tabindex="-1"
           @click="clickItem"
           @contextmenu="clickItem"
           @keydown.space.enter="clickItem"
           @mousedown="onMouseDown"
           @touchstart="touchstart"
           @touchmove="touchmove"
           @touchend="touchend">
  <slot></slot>
  <bbn-floater v-if="showFloater && !disabled"
               :element="attach || null"
               :source="filteredData"
               :class="'bbn-floater-context-' + bbnUid"
               ref="floater"
               :width="width"
               :height="height"
               :minWidth="minWidth"
               :minHeight="minHeight"
               :maxWidth="maxWidth"
               :maxHeight="maxHeight"
               :top="currentTop"
               :left="currentLeft"
               :right="currentRight"
               :bottom="currentBottom"
               children="items"
               :title="floaterTitle"
               :closable="!!floaterTitle"
               :content="content"
               :auto-hide="true"
               :mode="mode"
               @close="$emit('close'); showFloater = false;"
               @open="$emit('open')"
               :item-component="itemComponent"
               :position="position"/>
</component>`;script.setAttribute('id','bbn-tpl-component-context');script.setAttribute('type','text/x-template');document.body.insertAdjacentElement('beforeend',script);let css=document.createElement('link');css.setAttribute('rel','stylesheet');css.setAttribute('href',bbn.vue.libURL+'dist/js/components/context/context.css');document.head.insertAdjacentElement('beforeend',css);(bbn=>{"use strict";Vue.component('bbn-context',{mixins:[bbn.vue.basicComponent,bbn.vue.listComponent,bbn.vue.dimensionsComponent,bbn.vue.eventsComponent],props:{autobind:{type:Boolean,default:false},disabled:{type:Boolean,default:false},position:{type:String,default:''},tag:{type:String,default:'span'},floaterTitle:{type:[Boolean,String],default:false},context:{type:Boolean,default:false},content:{type:String},mode:{type:String,default:'free'},children:{type:String,default:'items'},itemComponent:{type:[Object,String]},attach:{type:HTMLElement},sourceAction:{type:[String,Function],default:'action'},sourceUrl:{type:[String,Function],default:'url'},},data(){return{showFloater:false,docEvent:false,currentLeft:null,currentTop:null,currentRight:null,currentBottom:null};},methods:{clickItem(e){if(!this.disabled&&((e.type==='keydown')||((e.type==='contextmenu')&&this.context)||((e.type==='click')&&!this.context))){if(e.preventDefault){e.preventDefault();e.stopPropagation();}
if(!e.target.closest('.bbn-floater-context-'+this.bbnUid)){if(!this.showFloater&&!this.attach){if(e.pageX>bbn.env.width / 2){this.currentLeft=null;this.currentRight=bbn.env.width-e.pageX+5;}
else{this.currentLeft=e.pageX-5;this.currentRight=null;}
if(e.pageY>bbn.env.height / 2){this.currentTop=null;this.currentBottom=bbn.env.height-e.pageY+5;}
else{this.currentTop=e.pageY-5;this.currentBottom=null;}}
this.toggle();}}},clickOut(e){if(!e.target.closest('.bbn-floater-context-'+this.bbnUid)&&this.showFloater){this.showFloater=false;if(e.preventDefault){e.preventDefault();e.stopPropagation();}}},toggle(){if(!this.showFloater){this.updateData().then(()=>{this.showFloater=!this.showFloater;});}
else{this.showFloater=!this.showFloater;}},onMouseDown(e){let event=new CustomEvent('mousedown',{cancelable:true,detail:e});this.$emit('mousedown',event);if(!event.defaultPrevented){e.preventDefault();e.stopPropagation();return false;}}},beforeDestroy(){if(this.docEvent){document.removeEventListener('click',this.clickout)}},watch:{showFloater(v){if(v){document.addEventListener('click',this.clickOut,true)
this.docEvent=true;}
else{document.removeEventListener('click',this.clickout)
this.docEvent=false;}}}});})(bbn);if(bbn_resolve){bbn_resolve("ok");}})(bbn);}