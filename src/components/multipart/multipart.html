<div class="bbn-overlay bbn-flex-height">
  <div class="bbn-flex-fill"
       v-for="(part, i) in parts"
       v-show="currentSelected === i"
       :key="i">
    <bbn-form :source="data"
              :buttons="false"
              :ref="'form-' + i"
              :prefilled="true"
              @ready="readyForm = true"
              @success="onSuccess">
      <div :class="{
        'bbn-overlay': true,
        'bbn-middle': centered
        'bbn-padded': !centered
      }">
        <div :class="{
          'bbn-block': !!centered,
          'bbn-vmiddle': !!centered,
          'bbn-overlay': !centered,
          'bbn-flex-height': !centered
        }"
              v-for=""
              style="display: block; max-height: 100%">
          <div class="bbn-m bbn-b bbn-padded"
               v-text="source[i].title || name"/>
          <div :class="{
            'bbn-block': !!items[i],
            'bbn-flex-fill': !items[i]
          }">
            <component :is="items[i].component || 'bbn-input'"
                        v-bind="items[i].getOptions()"
                        @keydown.enter.prevent.stop="clickNext()"
                        :required="items[i].required === undefined ? true : items[i].required"
                        v-model="data[name]"/>
          </div>
        </div>
      </div>
    </bbn-form>
  </div>
  <div class="bbn-form-footer bbn-popup-footer bbn-button-group bbn-flex-width bbn-lg">
    <bbn-button v-for="(button, i) in currentButtons"
                :key="button.key"
                v-bind="button"
    ></bbn-button>
  </div>
  <bbn-form v-if="action"
            :source="data"
            class="bbn-hidden"
            :target="target"
            :action="action"/>
</div>
