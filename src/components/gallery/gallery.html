<div :class="[componentClass, {'bbn-flex-height': scrollable}]">
  <div v-if="showToolbar" 
       class="bbn-l k-widget bbn-gallery-toolbar"
  >
    <bbn-button :text="_('Upload')"
                icon="fas fa-upload"
                @click="upload"
                v-if="!isSelecting && upload"
    ></bbn-button>
    <bbn-button :text="_('Download')"
                icon="fas fa-download"
                @click="setSelecting('download')"
                v-if="!isSelecting && download"
                :disabled="!total"
    ></bbn-button>
    <bbn-button :text="_('Remove')"
                icon="fas fa-trash-alt"
                @click="setSelecting('remove')"
                v-if="!isSelecting && remove"
                :disabled="!total"
    ></bbn-button>
    <bbn-button :text="_(selectingMode.toTitleCase())"
                icon="fas fa-check"
                @click="action"
                v-if="isSelecting"
                :disabled="!selected.length"
    ></bbn-button>
    <bbn-button :text="_('Cancel')"
                icon="fas fa-times"
                @click="setSelecting(false)"
                v-if="isSelecting"
    ></bbn-button>
  </div>
  <div ref="gallery" :class="{'bbn-flex-fill': scrollable}">
    <bbn-scroll v-if="scrollable">
      <div :style="{margin: '0 auto', textAlign: align}">
        <gallery-col v-for="(col, index) in cols" 
                     :key="'gallery-col-'+index" 
                     :index="index"
        ></gallery-col>
      </div>
    </bbn-scroll>
    <div v-else>
      <div :style="{margin: '0 auto', textAlign: align}">
        <gallery-col v-for="(col, index) in cols"
                     :key="'gallery-col-'+index"
                     :index="index"
        ></gallery-col>
      </div>
    </div>
  </div>
  <div v-if="pageable || isAjax">
    <div class="bbn-gallery-pager k-widget k-floatwrap" ref="pager">
      <div class="bbn-block"
            v-if="pageable"
      >
        <bbn-button icon="fas fa-angle-double-left"
                    :notext="true"
                    title="_('Go to the first page')"
                    :disabled="isLoading || (currentPage == 1)"
                    @click="currentPage = 1"
        ></bbn-button>
        <bbn-button icon="fas fa-angle-left"
                    :notext="true"
                    title="_('Go to the previous page')"
                    :disabled="isLoading || (currentPage == 1)"
                    @click="currentPage--"
        ></bbn-button>
        {{_('Page')}}
        <bbn-numeric v-if="currentData && currentData.length"
                     v-model="currentPage"
                     :min="1"
                     :max="numPages"
                     style="margin-right: 0.5em; width: 6em"
                     :disabled="isLoading"
        ></bbn-numeric>
        {{_('of') + ' ' + numPages}}
        <bbn-button icon="fas fa-angle-right"
                    :notext="true"
                    title="_('Go to the next page')"
                    :disabled="isLoading || (currentPage == numPages)"
                    @click="currentPage++"
        ></bbn-button>
        <bbn-button icon="fas fa-angle-double-right"
                    :notext="true"
                    title="_('Go to the last page')"
                    @click="currentPage = numPages"
                    :disabled="isLoading || (currentPage == numPages)"
        ></bbn-button>
        <span class="k-pager-sizes k-label">
        <bbn-dropdown :source="limits"
                      v-model.number="currentLimit"
                      @change="currentPage = 1"
                      :disabled="!!isLoading"
        ></bbn-dropdown>
        <span>{{_('items per page')}}</span>
      </span>
      </div>
      <div class="bbn-block" style="float: right">
      <span v-if="pageable"
            v-text="_('Display items') + ' ' + (start+1) + '-' + (start + currentLimit > total ? total : start + currentLimit) + ' ' + _('of') + ' ' + total"
      ></span>
        <span v-else
              v-text="total ? _('Total') + ': ' + total + ' ' + _('items') : _('No item')"
        ></span>
        &nbsp;
        <bbn-button v-if="isAjax"
                    title="_('Refresh')"
                    @click="updateData"
                    icon="fas fa-sync"
        ></bbn-button>
      </div>
    </div>
  </div>
</div>