<div :class="[componentClass]">
  <div class="bbn-bordered bbn-h-100">
    <div class="bbn-flex-height" ref="container">
      <template v-for="(s, idx) in source">
        <div class="bbn-panelbar-bbn-header bbn-header bbn-spadded bbn-vmiddle" ref="header">
          <div class="bbn-panelbar-arrow-container bbn-hspadded bbn-p bbn-middle bbn-block"
               @click="select(idx)">
            <i :class="['nf nf-fa-angle_right', 'bbn-panelbar-header-icon', 'bbn-large',  {'bbn-panelbar-header-icon-rotate': preselected === idx}]"></i>
          </div>
          <div :class="['bbn-panelbar-title', 'bbn-vmiddle', {
                  'bbn-panelbar-center': (align === 'center'),
                  'bbn-panelbar-start': (align === 'left'),
                  'bbn-panelbar-end': (align === 'right')
                }]"
          >
            <div v-html="s.header" 
                @click="select(idx)"
                :class="{
                  'bbn-p':true, 
                  'bbn-panelbar-inline': s.headerComponent,
                  'bbn-panelbar-right-padded': s.headerComponent || headerComponent
                }"
            ></div>
            <component v-if="s.headerComponent" 
                      :is="s.headerComponent" 
                      v-bind="source[idx]['headerOptions']"
            ></component>
            <component v-if="headerComponent && !s.headerComponent" 
                      :is="headerComponent" 
                      v-bind="headerOptions"
            ></component>
          </div>
        </div>
        <div :class="['bbn-border-box', {
              'bbn-w-100': !scrollable,
              'bbn-panelbar-selected' : selected === idx,
              'bbn-flex-fill': ((selected === idx) && (flex || source[idx].flex))
            }]"
            :style="getStyle(idx)"
        >
          <component :is="scrollable ? 'bbn-scroll' : 'div'"
                     :class="{'bbn-w-100': !scrollable}"
                     :key="idx"
          >
            <div v-if="!s.component && !component" 
                 v-html="s.content" 
            ></div>
            <div v-else-if="!s.component && component"
                :class="['bbn-panelbar-content', {'bbn-w-100': !scrollable}]"
            >
              <component :is="component"
                        v-bind="componentOptions"
                        :class="{'bbn-w-100': !scrollable}"
              ></component>  
            </div>
            <div v-else-if="(s.component)"
                :class="['bbn-panelbar-content', {'bbn-w-100': !scrollable}]"
            >
              <component :is="s.component"
                         v-bind="source[idx]['componentOptions']"
                         :class="{'bbn-w-100': !scrollable}"
              ></component>  
            </div>
          </component>
        </div>
      </template>
    </div>
  </div>
</div>